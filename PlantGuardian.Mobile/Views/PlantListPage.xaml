<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:PlantGuardian.Mobile.ViewModels"
             x:Class="PlantGuardian.Mobile.Views.PlantListPage"
             Title="My Garden">
    
    <ContentPage.ToolbarItems>
        <ToolbarItem Text="Add" Command="{Binding AddPlantCommand}" />
    </ContentPage.ToolbarItems>

    <RefreshView Command="{Binding LoadPlantsCommand}">
        <CollectionView ItemsSource="{Binding Plants}" Margin="20">
            <CollectionView.ItemsLayout>
                <GridItemsLayout Orientation="Vertical" Span="2" VerticalItemSpacing="10" HorizontalItemSpacing="10" />
            </CollectionView.ItemsLayout>
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame Padding="0" CornerRadius="10" HeightRequest="150" IsClippedToBounds="True">
                       <Grid>
                           <Image Source="{Binding ImageUrl}" Aspect="AspectFill" />
                           <LinearGradientBrush StartPoint="0,0" EndPoint="0,1" Opacity="0.7">
                               <GradientStop Color="Transparent" Offset="0.5" />
                               <GradientStop Color="Black" Offset="1.0" />
                           </LinearGradientBrush>
                           <Label Text="{Binding Name}" TextColor="White" 
                                  VerticalOptions="End" HorizontalOptions="Center" 
                                  Margin="0,0,0,10" FontAttributes="Bold" />
                       </Grid>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </RefreshView>
</ContentPage>
